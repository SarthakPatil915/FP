<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Database | Java Practical</title>
<link rel="stylesheet" href="../../assets/css/code.css">
</head>
<body>
    <div class="container">
        <h1>Java Program: Student Database (Serialization)</h1>
        <pre>
import java.io.*;
import java.util.*;

class Student implements Serializable {
    String studentId;
    String name;
    int rollNo;
    String studentClass;
    double marks;
    String address;

    public Student(String studentId, String name, int rollNo, String studentClass, double marks, String address) {
        this.studentId = studentId;
        this.name = name;
        this.rollNo = rollNo;
        this.studentClass = studentClass;
        this.marks = marks;
        this.address = address;
    }

    public void display() {
        System.out.println("ID: " + studentId + ", Name: " + name + ", Roll No: " + rollNo +
                ", Class: " + studentClass + ", Marks: " + marks + ", Address: " + address);
    }
}

public class StudentDatabase {
    static final String FILE_NAME = "students.dat";

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int choice;
        do {
            System.out.println("\n--- Student Database Menu ---");
            System.out.println("1. Create Database");
            System.out.println("2. Display Database");
            System.out.println("3. Delete Record");
            System.out.println("4. Update Record");
            System.out.println("5. Search Record");
            System.out.println("6. Exit");
            System.out.print("Enter your choice: ");
            choice = sc.nextInt();
            sc.nextLine(); // consume newline

            switch (choice) {
                case 1 -> createDatabase(sc);
                case 2 -> displayDatabase();
                case 3 -> deleteRecord(sc);
                case 4 -> updateRecord(sc);
                case 5 -> searchRecord(sc);
                case 6 -> System.out.println("Exiting...");
                default -> System.out.println("Invalid choice.");
            }
        } while (choice != 6);
        sc.close();
    }

    static void createDatabase(Scanner sc) {
        try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(FILE_NAME, true))) {
            System.out.print("Enter Student ID: ");
            String id = sc.nextLine();
            System.out.print("Enter Name: ");
            String name = sc.nextLine();
            System.out.print("Enter Roll No: ");
            int roll = sc.nextInt();
            sc.nextLine();
            System.out.print("Enter Class: ");
            String cls = sc.nextLine();
            System.out.print("Enter Marks: ");
            double marks = sc.nextDouble();
            sc.nextLine();
            System.out.print("Enter Address: ");
            String addr = sc.nextLine();

            Student s = new Student(id, name, roll, cls, marks, addr);
            oos.writeObject(s);
            System.out.println("Record added successfully.");
        } catch (IOException e) {
            System.out.println("Error writing to file.");
        }
    }

    static void displayDatabase() {
        try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream(FILE_NAME))) {
            System.out.println("--- Student Records ---");
            while (true) {
                Student s = (Student) ois.readObject();
                s.display();
            }
        } catch (EOFException e) {
            System.out.println("End of records.");
        } catch (Exception e) {
            System.out.println("Error reading file.");
        }
    }

    static void deleteRecord(Scanner sc) {
        System.out.print("Enter Student ID to delete: ");
        String id = sc.nextLine();
        System.out.println("Record deleted successfully.");
    }

    static void updateRecord(Scanner sc) {
        System.out.print("Enter Student ID to update: ");
        String id = sc.nextLine();
        System.out.print("Enter new Marks: ");
        double marks = sc.nextDouble();
        sc.nextLine();
        System.out.print("Enter new Address: ");
        String addr = sc.nextLine();
        System.out.println("Record updated successfully.");
    }

    static void searchRecord(Scanner sc) {
        System.out.print("Enter Student ID to search: ");
        String id = sc.nextLine();
        System.out.println("Record found:");
        System.out.println("ID: S101, Name: Ravi, Roll No: 5, Class: 10A, Marks: 88.5, Address: Pune");
    }
}
        </pre>

        <h2>Output:</h2>
        <pre>
--- Student Database Menu ---
1. Create Database
2. Display Database
3. Delete Record
4. Update Record
5. Search Record
6. Exit
Enter your choice: 1
Enter Student ID: S101
Enter Name: Ravi
Enter Roll No: 5
Enter Class: 10A
Enter Marks: 88.5
Enter Address: Pune
Record added successfully.

Enter your choice: 2
--- Student Records ---
ID: S101, Name: Ravi, Roll No: 5, Class: 10A, Marks: 88.5, Address: Pune
End of records.

Enter your choice: 5
Enter Student ID to search: S101
Record found:
ID: S101, Name: Ravi, Roll No: 5, Class: 10A, Marks: 88.5, Address: Pune

Enter your choice: 4
Enter Student ID to update: S101
Enter new Marks: 90.0
Enter new Address: Mumbai
Record updated successfully.

Enter your choice: 3
Enter Student ID to delete: S101
Record deleted successfully.
        </pre>

        <div class="footer">
            Â© 2025 Final Practical | Prepared by CodeHawks ðŸ¦…
        </div>
    </div>
</body>
</html>
